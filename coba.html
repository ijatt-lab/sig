<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>WebGIS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <style>
      html, body, #map {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <script>
      // Initialize the map
      var map = L.map("map").setView([-7.9, 110.45], 10);

      // Define basemap layers
      var Esri_WorldImagery = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}", {
          attribution: "23611059_Jatt &mdash; World Imagery",
        }
      ).addTo(map);

      // Define custom icon for mosque
      var mosqueIcon = L.icon({
        iconUrl: "https://www.freeiconspng.com/uploads/mosque-icon-12.png", // Replace with your mosque icon URL
        iconSize: [40, 40], // Size of the icon
        iconAnchor: [20, 40], // Point of the icon which will correspond to marker's location
        popupAnchor: [0, -40] // Point from which the popup should open relative to the iconAnchor
      });

      // Add markers with custom mosque icon and automatic popups
      var markers = [
        { coords: [-7.836756262510862, 110.15314947988749], name: "Al-Huda Gebangan Mosque", address: "Jl. Pengasih - Sermo No.184, Timpang, Pengasih, Kulon Progo, Yogyakarta 55652" },
        { coords: [-7.829556582108897, 110.16863455879394], name: "Masjid Al-Hidayah", address: "5588+GMF, Serang, Sendangsari, Kulon Progo, Yogyakarta 55652" },
        { coords: [-7.837605178711609, 110.17048819699927], name: "Masjid Agung Pengasih", address: "5559+25J, Pengasih, Kulon Progo, Yogyakarta 55652" },
        { coords: [-7.849697791999342, 110.17546091352654], name: "Masjid Nurul Iman", address: "45WF+7MC, Karang Tengah Kidul, Margosari, Kulon Progo, Yogyakarta 55652" },
        { coords: [-7.863581699160796, 110.18044781211819], name: "Masjid Asy-Syams", address: "45MJ+655, Ngramang, Kedungsari, Kulon Progo, Yogyakarta 55652" },
        { coords: [-7.859775401801796, 110.1754688512315], name: "Masjid Polres Kulon Progo", address: "45MG+M44, Ngramang, Kedungsari, Kulon Progo, Yogyakarta 55652" },
        { coords: [-7.86268859442044, 110.16619382893224], name: "Masjid Al Hidayah", address: "45M9+G4V, National Rte 3, Gn. Gempal, Wates, Kulon Progo, Yogyakarta 55651" },
        { coords: [-7.862689456226221, 110.16144416445151], name: "Masjid Al Hidayah Durungan", address: "45M6+8C9, Jl. Kolonel Sugiono, Wates, Kulon Progo, Yogyakarta 55651" },
        { coords: [-7.868741033071026, 110.15152267256826], name: "Masjid Ath-Thohiroh", address: "45G2+X64, Kedung Pring, Wates, Kulon Progo, Yogyakarta 55651" },
        { coords: [-7.881954484478942, 110.14450274740831], name: "Masjid Al Islam", address: "448W+RH3, Sanggrahan Lor, Bendungan, Wates, Kulon Progo, Yogyakarta 55651" }
      ];

      // Loop through markers and add to map
      markers.forEach(function(marker) {
        L.marker(marker.coords, { icon: mosqueIcon })
          .bindPopup(`<b>${marker.name}</b><br>${marker.address}`)
          .addTo(map)
          .openPopup(); // Automatically open popup
      });
    </script>
  </body>
</html>
